---
export interface Props {
    image: string;
    messure:string;
    altText:string;

}

const{image, messure, altText} = Astro.props;
---

<article class="medidores-container">
    <div class="medidor-group">
      <img loading="lazy" class="img" src={image} alt={altText}/>
      <div class="medidor">
        <p>{messure}</p>
        <div class="progress-bar">
          <div class="bar"></div>
        </div>
      </div>
    </div>
  </article>

  <style>

.medidores-container{
  padding:10px;
  min-width:100%;
  display:flex;
  flex-direction: column;
  
}
.medidor-group{
    width: 100%;
    display: flex;
  align-items:center;
  justify-content:space-around;
}

.img{
  width: 5rem;
  aspect-ratio:1;  
  border-radius:50%;
  box-shadow: -1px 10px 61px 23px rgba(0,0,0,0.75);
  background-color: white;
}

.medidor{
  width: 50%;
  font-family: "Bebas Neue";
  color:white;
}

.progress-bar{
  
  width: 90%;
  height: 30px;
  border-style: solid;
  border-color: white;
  padding: 2px;
  background-color: black;

  
}

.bar{
  --progress: 0%;
  height:100%;
  max-width:var(--progress);
  background-color: #59d84d;
background-image: linear-gradient(45deg, #59d84d 0%, #ece204 100%);
 background-repeat: no-repeat;
box-shadow: 0 0 10px 0px orange;
  transition: 2s ease-out;

}

  </style>

  <script>

document.addEventListener('scroll', function() {
    const bars = document.querySelectorAll(".bar");
    const windowHeight = window.innerHeight;
    var increment = 25;

    bars.forEach(bar => {
        var elementPosition = bar.getBoundingClientRect().top;

        if (elementPosition < windowHeight - 100) {
            if (bar instanceof HTMLElement) {
                bar.style.setProperty('--progress', increment + "%");
                increment+=25;
            }
        } else {
            if (bar instanceof HTMLElement) {
                bar.style.setProperty('--progress', "0%");
            }
        }
    });
});
  

  </script>